"use strict";var Core=function(n,e){function r(e,r){return l[e]?(console.warn("Module name '"+e+"' already assigned"),!1):l[e]={status:!1,run:r,stop:function(){n('[data-module="'+e+'"]').off().unbind()}}}function t(n,e){return v[n]?!0:v[n]=e}function o(n,e){return p[n]?(console.warn("Service name '"+n+"' already assigned"),!1):p[n]=e}function a(e,r){var t,o,a,c={},d=r?environment.root+"/get/module/"+e+"/"+r:environment.root+"/get/module/"+e;n.get(d).done(function(d){function v(){if(!d.third)return p();var e=function(e){var r=d.third[e];c[r]=!1,n.getScript(environment.root+"/js/3rd/"+r+".js",function(){c[r]=!0})};for(var r in d.third)e(r);a=setInterval(function(){h(p)},25)}function p(){if(!d.classes)return m();var e=function(e){var r=d.classes[e];c[r]=!1,n.getScript(environment.root+"/js/classes/"+r,function(){c[r]=!0})};for(var r in d.classes)e(r);a=setInterval(function(){h(m)},25)}function m(){if(!d.behaviors)return g();var n=function(n){var e=d.behaviors[n];c[e]=!1,i(e,function(){c[e]=!0})};for(var e in d.behaviors)n(e);a=setInterval(function(){h(g)},25)}function g(){return d.css&&n('<link type="text/css" rel="stylesheet">').appendTo("head").attr("href",environment.root+"/css/modules/"+d.css),d.js?void n.getScript(environment.root+"/js/modules/"+d.js,j):console.warn("Module js does not exist in cache")}function h(n){for(var e in c)if(c[e]===!1)return;clearInterval(a),n()}function j(){return t.object.find(".dark_content").addClass("pop"),o.animate({opacity:1},100),l[e].dark=t,u(e,r)}return d=JSON.parse(d),"error"==d.type?console.warn(d.message):(t=f("dark"))?(t.run(e),o=n('\n				<part class="dark_content" style="opacity: 0;">\n					<module data-module="'+e+'">\n						'+d.module+"\n					</module>\n				</part>\n			").appendTo(t.object),l[e]?(s(e),j()):void v()):console.warn("Service 'dark' undefined")})}function i(e,r){return v[e]?r?r():!0:void n.getScript(environment.root+"/js/behaviors/"+e+".js").done(r)}function u(n,r){return l[n]?l[n].status?!0:(l[n].run(c(n,r)),l[n].status=!0):e}function s(n){return l[n]?(l[n].dark&&l[n].dark.remove(),l[n].status=!1,l[n].stop(),!0):e}function c(n,e){var r=Paperwork.body.find('[data-module="'+n+'"]'),t=function(){var n=location.search.substring(1);return n?JSON.parse('{"'+n.replace(/&/g,'","').replace(/=/g,'":"')+'"}',function(n,e){return""===n?e:decodeURIComponent(e)}):{}}();return e||(e={}),{name:n,data:e,url:t,element:r,require:f,load:a,use:function(e,r){return d(n,e,r)},stop:function(){return s(n)}}}function d(n,e,r){var t=c(n);return r||(r={}),delete t.use,delete t.load,v[e]?v[e](t,r):void i(e,function(){return v[e](t,r)})}function f(n){return p[n]?p[n]():console.warn("Service "+n+" is undefined")}var l={},v={},p={};return{require:f,loadModule:a,addModule:r,addBehavior:t,addService:o,start:u,stop:s,startAll:function(){for(var n in l)u(n)},stopAll:function(){for(var n in l)s(n)}}}(jQuery);