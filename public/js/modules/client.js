"use strict";Core.addModule("client",function(t){function e(){l.on("change",'.client-details input, [data-type="name"]',function(){l.find('[data-type="name"]').val().trim()&&$.post(u.put,{id:r,name:l.find('[data-type="name"]').val().trim(),address:l.find('[data-type="address"]').val().trim(),email:l.find('[data-type="email"]').val().trim(),phone:l.find('[data-type="phone"]').val().trim()}).done(function(t){Paperwork.send("notification")})})}function n(){l.on("click","button.delete",function(){var t=$(this),e=$(this).html();swal({title:"Are you sure you want to delete this client?",text:"Deleting this client will delete ALL jobs, quotes and invoices!",showCancelButton:!0,closeOnConfirm:!0},function(n){return n?void l.find('form[name="delete"]').submit():Paperwork.ready(t,e)})})}function i(){l.on("keyup",'[data-type="notes"]',function(){var t;t=s.toText($(this)),console.log(t.html().trim()),o(t.html().trim())})}function o(t){clearTimeout(d),d=setTimeout(function(){$.post(u.put,{id:r,notes:t}).done(function(t){Paperwork.send("notification","Saved")})},500)}function a(){l.on("click",'[data-type="email-button"]',function(){var e=l.find("[client-email]").val();t.load("email",{address:e})})}var d,l=t.element,r=l.data("id"),u={get:environment.root+"/jobs",put:environment.root+"/put/client-details"},s=t.require("parse");t.use("tab"),e(),n(),i(),a()});