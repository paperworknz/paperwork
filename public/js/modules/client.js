"use strict";Core.addModule("client",function(t){function e(){u.on("change",'.client-details input, [data-type="name"], [data-type="address"]',i),u.on("blur",'[data-type="address"]',i)}function n(){u.on("click",'[data-type="new-job"]',function(){Paperwork["goto"](environment.root+"/jobs?id="+client_number)})}function i(){if(u.find('[data-type="name"]').val().trim()){var t=m.toText(u.find('[data-type="address"]'));$.post(c.put,{id:s,name:u.find('[data-type="name"]').val().trim(),address:t.html().trim(),email:u.find('[data-type="email"]').val().trim(),phone:u.find('[data-type="phone"]').val().trim()}).done(function(t){Paperwork.send("notification")})}}function a(){u.on("click","button.delete",function(){var t=$(this),e=$(this).html();swal({title:"Are you sure you want to delete this client?",text:"Deleting this client will delete ALL jobs, quotes and invoices!",showCancelButton:!0,closeOnConfirm:!0},function(n){return n?void u.find('form[name="delete"]').submit():Paperwork.ready(t,e)})})}function o(){u.on("keyup",'[data-type="notes"]',function(){var t;t=m.toText($(this)),d(t.html().trim())})}function d(t){clearTimeout(l),l=setTimeout(function(){$.post(c.put,{id:s,notes:t}).done(function(t){Paperwork.send("notification","Saved")})},500)}function r(){u.on("click",'[data-type="email-button"]',function(){var e=u.find('[data-type="email"]').val();t.load("email",{address:e})})}var l,u=t.element,s=u.data("id")||t.data,c={get:environment.root+"/jobs",put:environment.root+"/put/client-details"},m=t.require("parse");t.use("tab"),e(),n(),a(),o(),r()});