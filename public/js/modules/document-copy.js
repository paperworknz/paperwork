"use strict";Core.addModule("document-copy",function(e){var t=e.element,a=e.require("parse"),n={get:environment.root+"/get/job"};t.find('[data-type="job_number"]').val(e.data.job_number).attr("placeholder",e.data.job_number),Paperwork.validate(t.find(".copy-parent"),t.find('[data-type="new-document"]'),"document-copy"),t.on("change",'[data-type="job_number"]',function(){var e=$(this).val().trim();$(this).removeClass("ok"),t.find('[data-type="validate-job_number"]').val(""),e&&$.get(n.get+"/"+e).done(function(e){e=JSON.parse(e),"error"==e.type&&(t.find('[data-type="job_number"]').val("").addClass("error").blur(),setTimeout(function(){t.find('[data-type="job_number"]').removeClass("error")},500)),"success"==e.type&&(t.find('[data-type="job_number"]').addClass("ok"),t.find('[data-type="validate-job_number"]').val(e.job_id))})}),t.on("click",'[data-type="new-document"]',function(){var n=a.toNumber(t.find('[data-type="job_number"]').val()),o=a.toNumber(t.find('[data-type="validate-job_number"]').val())||e.data.job_id,d=$(this).data("template-id");Paperwork.send("new-document",{job_id:o,job_number:n,template_id:d,document:e.data.document_data}),e.stop()}),t.on("click",'[data-type="cancel-button"]',function(){e.stop()})});