"use strict";Core.addModule("clients",function(e){function n(){$.get(d.get).done(function(e){c=JSON.parse(e);for(var n in c)r.push(c[n].name);t(),o.find("#the-basics").fadeIn(250)})}function t(){o.off(),o.on("click",".create-new",function(){o.find("#new-content").slideToggle(100)}),o.on("click",'[data-type="new-client"]',function(){var e=o.find("input[name=name]").val();e.length&&$.post(d.post,{name:e}).done(function(e){var e=JSON.parse(e);return"success"!=e.type?Paperwork.send("flash",{type:"error",message:e.message}):void i(e.client.client_number,e.client.name)})}),o.find(".typeahead").typeahead({hint:!0,highlight:!0,minLength:0},{source:substringMatcher(r),limit:1e6}),o.on("keydown",".typeahead",function(e){var n=jQuery.Event("keydown");n.keyCode=n.which=9,13==e.which&&(o.find(".typeahead").trigger(n),a())}),o.on("typeahead:beforeclose",".typeahead",function(e){e.preventDefault()}),o.on("typeahead:selected",".typeahead",a),o.find("input.tt-input").focus()}function i(e,n){r.unshift(n),c.push({client_number:e,name:n}),o.find("#the-basics").html('<input type="text" class="typeahead" placeholder="Quick Search">'),Paperwork.ready(o.find('[data-type="new-client"]'),"CREATE"),t()}function a(){var e=o.find(".tt-input").val();for(var n in c){var t=c[n];t.name==e&&Paperwork["goto"](environment.root+"/client/"+t.client_number)}}var o=e.element,r=[],c=[],d={get:environment.root+"/get/clients",post:environment.root+"/post/client"};n()});